<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="CRAPpy : A simulation-game where scripted robots fight to the robot-death." />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>CRAPpy</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/CSSDePaul/Computerized-Robot-Arena-Program">View on GitHub</a>

          <h1 id="project_title">CRAPpy</h1>
          <h2 id="project_tagline">A simulation-game where scripted robots fight to the robot-death.</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/CSSDePaul/Computerized-Robot-Arena-Program/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/CSSDePaul/Computerized-Robot-Arena-Program/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="computerized-robot-arena-program" class="anchor" href="#computerized-robot-arena-program"><span class="octicon octicon-link"></span></a>Computerized-Robot-Arena-Program</h1>

<p>CRAP is a competitive coding challenge which has two or more coders write the behavior code for robots on a field of battle.</p>

<p>Latest Release: <a href="https://github.com/CSSDePaul/Computerized-Robot-Arena-Program/releases/tag/v0.1.3">v0.1.3</a></p>

<p>With the release of v0.1.0 the game is now runable from the command line (no graphical interface yet, learn to use the CLI you NUB). To have two scripts duke it out, navigate to the directory containing the Computerized-Robot-Arena-Program directory and your two scripts, and run <code>python Computerized-Robot-Arena-Program script1.py script2.py</code>. </p>

<p><strong>Note</strong>: CRAPpy requires python 3.3+, so you might have to run <code>python3.3 Computerized-Robot-Arena-Program script1.py script2.py</code> depending on your local python install.</p>

<p><img src="http://i.imgur.com/cK0tYOY.png" alt=""></p>

<h2>
<a name="writing-scripts" class="anchor" href="#writing-scripts"><span class="octicon octicon-link"></span></a>Writing Scripts</h2>

<p>The basic structure of a robot behavior script is as follows:</p>

<div class="highlight highlight-python"><pre><span class="k">class</span> <span class="nc">robotBehavior</span><span class="p">:</span>

    <span class="k">def</span> <span class="nf">decideAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        Returns one of the elements in actions.</span>
<span class="sd">        '''</span>

        <span class="n">chosen_action</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="c"># some logic to choose the action you want</span>

        <span class="k">return</span> <span class="n">actions</span><span class="p">[</span><span class="n">chosen_action</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>

<p>Behavior scripts have to be wrapped in a class called <code>robotBehavior</code> and have a function <code>decideAction</code> which takes in the object representing the robot, an object representing the board, and a list with strings representing the acations the robot are allowed to take. <code>decideAction</code> should be the element of <em>actions</em> representing the action you want the robot to take.</p>

<h3>
<a name="actions" class="anchor" href="#actions"><span class="octicon octicon-link"></span></a>Actions</h3>

<p>The robots can take the following actions:</p>

<ul>
<li>
<strong>Move Forward</strong> (MOVE_FORWARD) - The robot moves one space in the direction its currently facing.</li>
<li>
<strong>Turn Left</strong> (TURN_LEFT) - The robot turns 90 degrees to the left (anti-clockwise).</li>
<li>
<strong>Turn Right</strong> (TURN_RIGHT) - The robot turns 90 degrees to the right (clockwise).</li>
<li>
<strong>Fire Projectile</strong> (FIRE_PROJECTILE) - The robot fires a projectile directly in front of itself, moving in the direction the robot is facing.</li>
</ul><h3>
<a name="example-scripts" class="anchor" href="#example-scripts"><span class="octicon octicon-link"></span></a>Example Scripts</h3>

<p>CRAPpy comes with several example scripts used for testing and debugging which define very basic strategies and give examples of how to use the API to write behavioral scripts. Here are a few:</p>

<h4>
<a name="randomscriptpy" class="anchor" href="#randomscriptpy"><span class="octicon octicon-link"></span></a>randomScript.py</h4>

<p>This script randomly chooses one of the available options.</p>

<div class="highlight highlight-python"><pre><span class="kn">import</span> <span class="nn">random</span>

<span class="k">class</span> <span class="nc">robotBehavior</span><span class="p">:</span>

    <span class="c"># Returns a string from Board.MOVEFUNCTIONS.keys()</span>
    <span class="c"># this is the action the agent decided to take</span>
    <span class="c"># the human player uploads a script that is called by this action </span>
    <span class="k">def</span> <span class="nf">decideAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        Returns the alias to a random movement function in the robot class</span>
<span class="sd">        '''</span>
        <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>

<h4>
<a name="smartrandomscriptpy" class="anchor" href="#smartrandomscriptpy"><span class="octicon octicon-link"></span></a>smartRandomScript.py</h4>

<p>smartRandomScript is an improvement over randomScript, which won't suicidally walk into an occupied space.</p>

<div class="highlight highlight-python"><pre><span class="kn">import</span> <span class="nn">random</span>
<span class="kn">import</span> <span class="nn">utility</span>

<span class="k">class</span> <span class="nc">robotBehavior</span><span class="p">:</span>

    <span class="c"># Returns a string from Board.MOVEFUNCTIONS.keys()</span>
    <span class="c"># this is the action the agent decided to take</span>
    <span class="c"># the human player uploads a script that is called by this action </span>
    <span class="k">def</span> <span class="nf">decideAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        Returns the alias to a random movement function in the robot class</span>
<span class="sd">        '''</span>

        <span class="n">choice</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">actions</span><span class="p">)</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">choice</span> <span class="o">==</span> <span class="s">'MOVE_FORWARD'</span><span class="p">):</span>

            <span class="n">forwardLoc</span> <span class="o">=</span> <span class="n">utility</span><span class="o">.</span><span class="n">forwardCoords</span><span class="p">(</span><span class="n">robot</span><span class="o">.</span><span class="n">xPosition</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">yPosition</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">rotation</span><span class="p">,</span> <span class="n">board</span><span class="p">)</span>

            <span class="n">isOccupied</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">occupied</span><span class="p">(</span><span class="n">forwardLoc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">forwardLoc</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">isOccupied</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">):</span>
                <span class="c">#space in front is outside the board</span>
                <span class="k">return</span> <span class="s">'TURN_RIGHT'</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">isOccupied</span><span class="p">):</span>
                <span class="c">#if something is in front, shoot at it</span>
                <span class="k">return</span> <span class="s">'SHOOT_PROJECTILE'</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c">#if something isn't in front, move forward</span>
                <span class="k">return</span> <span class="s">'MOVE_FORWARD'</span>

        <span class="k">return</span> <span class="n">choice</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>

<h4>
<a name="directwalkpy" class="anchor" href="#directwalkpy"><span class="octicon octicon-link"></span></a>directWalk.py</h4>

<p>This robot picks the first other robot on the field and walks into it so that both of them are destroyed.</p>

<div class="highlight highlight-python"><pre><span class="sd">'''</span>
<span class="sd">Created on Mar 12, 2014</span>

<span class="sd">@author: excaliburhissheath</span>
<span class="sd">'''</span>

<span class="kn">from</span> <span class="nn">utility</span> <span class="kn">import</span> <span class="n">forwardCoords</span><span class="p">,</span> <span class="n">manhattanDistance</span>

<span class="k">class</span> <span class="nc">robotBehavior</span><span class="p">:</span>
    <span class="sd">'''</span>
<span class="sd">    A behavior that make the robot walk in a straight line towards the closest robot.</span>
<span class="sd">    '''</span>

    <span class="k">def</span> <span class="nf">decideAction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">robot</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">actions</span><span class="p">):</span>
        <span class="sd">'''</span>
<span class="sd">        Walks towards the other robot and tries to run into it.</span>
<span class="sd">        '''</span>

        <span class="c"># get the list of robots from the board</span>
        <span class="n">robots</span> <span class="o">=</span> <span class="n">board</span><span class="o">.</span><span class="n">getRobots</span><span class="p">()</span>
        <span class="n">robotKeys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">robots</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="c"># temporary hacky workaround</span>
        <span class="c"># get the other robot (future versions should find the closest robot)</span>
        <span class="n">closest</span> <span class="o">=</span> <span class="n">robots</span><span class="p">[</span><span class="n">robotKeys</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span>

        <span class="c"># if first robot is this robot, get second robot</span>
        <span class="k">if</span> <span class="n">robotKeys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">robot</span><span class="o">.</span><span class="n">name</span><span class="p">:</span>
            <span class="n">closest</span> <span class="o">=</span> <span class="n">robots</span><span class="p">[</span><span class="n">robotKeys</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

        <span class="c"># get current distance to target robot</span>
        <span class="n">currentDistance</span> <span class="o">=</span> <span class="n">manhattanDistance</span><span class="p">(</span><span class="n">robot</span><span class="p">,</span> <span class="n">closest</span><span class="p">)</span>

        <span class="c"># get coordinates of space in front of robot</span>
        <span class="n">forwardPos</span> <span class="o">=</span> <span class="n">forwardCoords</span><span class="p">(</span><span class="n">robot</span><span class="o">.</span><span class="n">xPosition</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">yPosition</span><span class="p">,</span> <span class="n">robot</span><span class="o">.</span><span class="n">rotation</span><span class="p">)</span>

        <span class="c"># get distance of forwardPos from target</span>
        <span class="n">forwardDistance</span> <span class="o">=</span> <span class="n">manhattanDistance</span><span class="p">(</span><span class="n">forwardPos</span><span class="p">,</span> <span class="n">closest</span><span class="p">)</span>

        <span class="c"># if forward gets robot closer to target, move forward</span>
        <span class="k">if</span> <span class="n">forwardDistance</span> <span class="o">&lt;</span> <span class="n">currentDistance</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">'MOVE_FORWARD'</span>
        <span class="c"># otherwise turn right</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="s">'TURN_RIGHT'</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">pass</span>
</pre></div>

<h2>
<a name="more-information" class="anchor" href="#more-information"><span class="octicon octicon-link"></span></a>More Information</h2>

<p>For more information see <a href="https://github.com/CSSDePaul/Computerized-Robot-Arena-Program/wiki">the wiki</a>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">CRAPpy maintained by <a href="https://github.com/CSSDePaul">CSSDePaul</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
